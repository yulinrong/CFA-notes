
Noted by 量化菜鸟


# R6 抽样与估计

> 样本是总体的一个子集——一个被研究以推断关于总体本身的结论的子集。




## 抽样
+ sampling抽样：获取样本的过程。
+ Sampling Methods：probability sampling和non-probability sampling
+ Sample statistics 样本统计量 (statistics统计量)
+ probability sampling 概率抽样使总体中的每个成员都有平等的机会被选中：简单随机抽样和分层随机抽样
+ Sampling plan 抽样计划是用于选择样本的一组规则。
+ Systematic sampling 系统抽样：选取第k个成员直至达到所需样本大小的过程。
+ sampling error：统计量的观测值与使用总体子集得到的估计值之间的差值。
+ sampling distribution 抽样分布：从同一总体中随机抽取的相同大小的样本计算得到的所有不同可能值的分布。
+ sampling distribution of a statistic 统计量的抽样分布：统计量的抽样分布是该统计量从同一总体中随机抽取的相同大小的样本计算得到的所有不同可能值的分布。



+ stratified random sampling 分层随机抽样：总体根据一个或多个分类标准被划分为亚总体(层)。然后从每个地层中抽取简单的随机样本，其大小与总体中每个地层的相对大小成比例。然后将这些样本汇集起来，形成分层的随机样本。
+ Indexing 索引：一种投资策略，投资者根据特定指数的表现构建一个投资组合。
+ cluster sampling 集群抽样：将总体划分为代表总体的亚总体组(群)，然后随机抽取某些群以形成样本的一种方法。

+ Non-Probability sampling 非概率抽样
  1. convenience sampling 便利抽样：一个元素是根据研究人员是否可以访问或研究人员访问该元素的难易程度从总体中选择的。
  2. judgmental sampling 判断抽样：根据研究人员的知识和专业判断从人群中选择性地挑选元素。



+ 抽样方法总结
![抽样方法总结](https://s3.amazonaws.com/wmx-api-production/courses/36811/images/CFA0128-R-EXH6.png)


## 样本均值分布与中心极限定理

+ Central limit theorem 中心极限定理
> 给定由具有均值$\mu$和有限方差$\sigma^2$的任何概率分布描述的总体，样本均值的抽样分布$\bar{X}$⎯⎯⎯当样本量$n$很大时，从该总体中大小为$n$的随机样本计算得出的值将近似正态，均值$\mu$（总体均值）和方差$\sigma^2/n$（总体方差除以n）。

+ Standard Error of the Sample Mean样本均值的标准误差
+ 样本均值的标准误差$\sigma_{\bar{X}} = \frac{s}{\sqrt{n}}$
+ 总体标准差$s_{\bar{X}} = \frac{s}{\sqrt{n}}$



根据中心极限定理，当我们从任何分布中采样时，只要我们的样本量很大，样本均值的分布将具有以下性质：
1. 样本均值的分布$\bar{X}$⎯⎯⎯将大致正态。
2. $\bar{X}$的分布的均值⎯⎯⎯将等于从中抽取样本的总体的平均值。
3. $\bar{X}$的分布的方差⎯⎯⎯将等于总体方差除以样本量。


## 总体均值的点估计

+ 统计推断的两个分支：假设检验和估计
+ 估计量estimators：用来计算样本均值和其他所有样本统计量的公式
+ 估计estimate:用估计器从样本观测中计算出的特定值
+ 点估计point estimate：对一个未知量的单一数值估计，如总体参数
+ 无偏性unbiasedness：无偏估计是指其期望值(其抽样分布的平均值)等于其想要估计的参数。
+ 有效性Efficiency：如果相同参数的其他无偏估计量没有具有较小方差的抽样分布，则无偏估计量是有效的。
+ 一致性Consistency：一致的估计量是随着样本量的增加，接近总体参数值的估计概率增加的估计量。
  


## 总体均值的置信区间和样本量的选择
+ 置信区间Confidence Interval：置信区间是一个范围，在这个范围内，人们可以以给定的概率$1−\alpha$(称为置信度)断言，它将包含它打算估计的参数。
+ 置信区间的构建:参数的$100(1−\alpha)\%$置信区间具有以下结构:$点估计 \pm 可靠性因子 × 标准误差$
+ 点估计 = 参数的点估计（样本统计量的值）
+ 可靠性因子 = 基于点估计的假设分布和置信区间的置信度 (1 - α) 的数字
+ 标准误差 = 提供点估计的样本统计量的标准误差



+ 总体均值的置信区间（具有已知方差的正态分布总体）$\bar{X} \pm z_{\alpha /2} \frac{\sigma}{\sqrt{n}}$
+ 基于标准正态分布的置信区间的可靠性因子
  1. 90% 置信区间：$z_{0.05} = 1.65$
  2. 95% 置信区间：$z_{0.025} = 1.96$
  3. 99% 置信区间：$z_{0.005} = 2.58$
+ 总体均值的置信区间 - z替代方案（大样本，总体方差未知）$\bar{X} \pm z_{\alpha /2} \frac{s}{\sqrt{n}}$
+ 总体均值的置信区间（总体方差未知）— t -分布$\bar{X} \pm t_{\alpha /2} \frac{s}{\sqrt{n}}$
+ 在给定的置信度(1−α)下，获得所需$E = Reliability\ factor × Standard\ error$值的样本量可以推导为$n = [(t × s)/E]^2$。

## 重采样
+ 重采样resampling：一种统计方法，从原始观测数据样本中重复抽取样本，用于总体参数的统计推断。
+ bootstrap：使用计算机模拟进行统计推断，而不使用诸如z统计量或t统计量之类的分析公式。
+ 无模型重采样或非参数重采样：$s_{\bar{X}} = \sqrt{\frac{1}{B-1} \sum_{b=1}^{B}(\hat{\theta}_b - \bar{\theta})^2}$
+ $s_{\bar{X}}$对样本均值标准误差的估计
+ $B$表示从原始样本中抽取的重样个数。
+ $\hat{\theta}_b$再抽样的平均值
+ $\bar{\theta}$所有重样本均值的平均值
+ Jackknife: 一种重新采样的方法，每次取原始的观测数据样本，然后从集合中去掉一个观测数据(不能替换)，从而重复地抽取样本。



## 数据窥探偏差、样本选择偏差、预测偏差和时间周期偏差

+ 数据窥探data snooping:很快描述的方式过度使用相同或相关数据
+ 数据窥探偏差data snooping bias
+ 调查数据窥探偏差的存在：将数据分成三个独立的数据集——训练数据集、验证数据集和测试数据集。
+ 训练数据集用于构建模型并拟合模型参数。
+ 验证数据集用于在调整模型参数时评估模型拟合。
+ 测试数据集是提供样本外测试来评估最终模型的拟合度



+ 样本选择偏差Sample selection bias：根据某一特定属性系统地排除总体中的某些成员而产生的偏差
  1. 幸存者偏差 survivorship bias:涉及到数据库中只包含当前的投资基金。
  2. 隐式选择偏差 implicit selection bias:由于允许自我选择的阈值
  3. 回填偏差 backfill bias:如果一只基金在第一次开始报告实际业绩时就将其过去的业绩数据回填到数据库，就会产生偏差。
+ 前瞻偏差Look-Ahead Bias：由于使用测试日期上无法获得的信息而造成的偏差。
+ 时间段偏差time-period bias：使用一个时间序列样本时，统计结论可能对样本的开始和结束日期敏感。



## 学习目标

1. 将概率样本与非概率样本进行比较和对比，并讨论每种样本在投资问题中的应用
2. 解释抽样误差
3. 比较和对比简单随机、分层随机、整群、便利和判断抽样
4. 解释中心极限定理及其重要性
5. 计算和解释样本均值的标准误
6. 识别和描述估计量的理想属性
7. 对比总体参数的点估计和置信区间估计



8. 计算和解释总体均值的置信区间，给定具有 
   - 已知总体方差 
   - 未知总体方差或
   - 未知总体方差和大样本量的正态分布
9.  描述使用重采样（bootstrap、jackknife）来估计统计量的采样分布
10. 描述有关选择适当样本量、数据窥探偏差、样本选择偏差、幸存者偏差、前瞻偏差和时间段偏差的问题